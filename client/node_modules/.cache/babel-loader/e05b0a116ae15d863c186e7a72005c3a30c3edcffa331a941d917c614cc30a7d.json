{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import axios from'axios';import'./App.css';// Componentes\nimport Header from'./components/Header';import Footer from'./components/Footer';import HomePage from'./pages/HomePage';import AdminLogin from'./pages/AdminLogin';import AdminDashboard from'./pages/AdminDashboard';import ProductForm from'./components/ProductForm';// Configuração do axios\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.baseURL='http://localhost:5000';function App(){const[isAdmin,setIsAdmin]=useState(false);const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchProducts();},[]);const fetchProducts=async()=>{try{const response=await axios.get('/api/products');setProducts(response.data);}catch(error){console.error('Erro ao carregar produtos:',error);}finally{setLoading(false);}};const handleLogin=success=>{setIsAdmin(success);};const handleLogout=()=>{setIsAdmin(false);};const addProduct=async productData=>{try{const formData=new FormData();Object.keys(productData).forEach(key=>{formData.append(key,productData[key]);});const response=await axios.post('/api/products',formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.data.success){setProducts([...products,response.data.product]);return true;}}catch(error){console.error('Erro ao adicionar produto:',error);return false;}};const updateProduct=async(id,productData)=>{try{const formData=new FormData();Object.keys(productData).forEach(key=>{formData.append(key,productData[key]);});const response=await axios.put(`/api/products/${id}`,formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.data.success){setProducts(products.map(p=>p.id===id?response.data.product:p));return true;}}catch(error){console.error('Erro ao atualizar produto:',error);return false;}};const deleteProduct=async id=>{try{const response=await axios.delete(`/api/products/${id}`);if(response.data.success){setProducts(products.filter(p=>p.id!==id));return true;}}catch(error){console.error('Erro ao deletar produto:',error);return false;}};const toggleProductStatus=async id=>{try{const response=await axios.patch(`/api/products/${id}/toggle`);if(response.data.success){setProducts(products.map(p=>p.id===id?response.data.product:p));}}catch(error){console.error('Erro ao alternar status do produto:',error);}};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{isAdmin:isAdmin,onLogout:handleLogout}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{products:products,loading:loading})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/login\",element:isAdmin?/*#__PURE__*/_jsx(Navigate,{to:\"/admin\"}):/*#__PURE__*/_jsx(AdminLogin,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:isAdmin?/*#__PURE__*/_jsx(AdminDashboard,{products:products,onAddProduct:addProduct,onUpdateProduct:updateProduct,onDeleteProduct:deleteProduct,onToggleStatus:toggleProductStatus}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\"})})]})}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","axios","Header","Footer","HomePage","AdminLogin","AdminDashboard","ProductForm","jsx","_jsx","jsxs","_jsxs","defaults","baseURL","App","isAdmin","setIsAdmin","products","setProducts","loading","setLoading","fetchProducts","response","get","data","error","console","handleLogin","success","handleLogout","addProduct","productData","formData","FormData","Object","keys","forEach","key","append","post","headers","product","updateProduct","id","put","map","p","deleteProduct","delete","filter","toggleProductStatus","patch","children","className","onLogout","path","element","to","onLogin","onAddProduct","onUpdateProduct","onDeleteProduct","onToggleStatus"],"sources":["C:/Users/ivangomesdasilvasodr/Desktop/afiliados-site/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './App.css';\r\n\r\n// Componentes\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport HomePage from './pages/HomePage';\r\nimport AdminLogin from './pages/AdminLogin';\r\nimport AdminDashboard from './pages/AdminDashboard';\r\nimport ProductForm from './components/ProductForm';\r\n\r\n// Configuração do axios\r\naxios.defaults.baseURL = 'http://localhost:5000';\r\n\r\nfunction App() {\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const response = await axios.get('/api/products');\r\n      setProducts(response.data);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar produtos:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogin = (success) => {\r\n    setIsAdmin(success);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    setIsAdmin(false);\r\n  };\r\n\r\n  const addProduct = async (productData) => {\r\n    try {\r\n      const formData = new FormData();\r\n      Object.keys(productData).forEach(key => {\r\n        formData.append(key, productData[key]);\r\n      });\r\n\r\n      const response = await axios.post('/api/products', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      if (response.data.success) {\r\n        setProducts([...products, response.data.product]);\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao adicionar produto:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateProduct = async (id, productData) => {\r\n    try {\r\n      const formData = new FormData();\r\n      Object.keys(productData).forEach(key => {\r\n        formData.append(key, productData[key]);\r\n      });\r\n\r\n      const response = await axios.put(`/api/products/${id}`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      if (response.data.success) {\r\n        setProducts(products.map(p => p.id === id ? response.data.product : p));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar produto:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteProduct = async (id) => {\r\n    try {\r\n      const response = await axios.delete(`/api/products/${id}`);\r\n      if (response.data.success) {\r\n        setProducts(products.filter(p => p.id !== id));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao deletar produto:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const toggleProductStatus = async (id) => {\r\n    try {\r\n      const response = await axios.patch(`/api/products/${id}/toggle`);\r\n      if (response.data.success) {\r\n        setProducts(products.map(p => p.id === id ? response.data.product : p));\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao alternar status do produto:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Header isAdmin={isAdmin} onLogout={handleLogout} />\r\n        \r\n        <main className=\"main-content\">\r\n          <Routes>\r\n            <Route \r\n              path=\"/\" \r\n              element={\r\n                <HomePage \r\n                  products={products} \r\n                  loading={loading} \r\n                />\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/admin/login\" \r\n              element={\r\n                isAdmin ? \r\n                <Navigate to=\"/admin\" /> : \r\n                <AdminLogin onLogin={handleLogin} />\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/admin\" \r\n              element={\r\n                isAdmin ? \r\n                <AdminDashboard \r\n                  products={products}\r\n                  onAddProduct={addProduct}\r\n                  onUpdateProduct={updateProduct}\r\n                  onDeleteProduct={deleteProduct}\r\n                  onToggleStatus={toggleProductStatus}\r\n                /> : \r\n                <Navigate to=\"/admin/login\" />\r\n              } \r\n            />\r\n          </Routes>\r\n        </main>\r\n        \r\n        <Footer />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}